{
  "DDD Entity Base": {
    "prefix": ["dddentity"],
    "description": "Crea una entidad de dominio extendiendo de Entity base con Zod y Result",
    "body": [
      "import {",
      "  ${1:Name}EntitySchema,",
      "  type Create${1:Name}Props,",
      "  type Update${1:Name}Props,",
      "  type ${1:Name}Props,",
      "} from '${2:module}/schemas/${3:schema-file}.schema';",
      "import { Entity } from '${4:shared}/building-blocks/entity.base';",
      "import { ValidationError } from '${4:shared}/errors/errors';",
      "import { formatZodIssues } from '${4:shared}/utils/zod-utils';",
      "import { err, ok, type Result } from 'neverthrow';",
      "",
      "export class ${1:Name} extends Entity<${1:Name}Props> {",
      "  private constructor(props: ${1:Name}Props) {",
      "    super(props);",
      "  }",
      "",
      "  static create(payload: Create${1:Name}Props): Result<${1:Name}, ValidationError> {",
      "    const result = ${1:Name}EntitySchema.safeParse({",
      "      ...payload,",
      "    } satisfies ${1:Name}Props);",
      "",
      "    if (!result.success) {",
      "      const issues = formatZodIssues(result.error.issues);",
      "      return err(new ValidationError('No se pudo crear ${1:Name}', issues));",
      "    }",
      "",
      "    return ok(new ${1:Name}(result.data));",
      "  }",
      "",
      "  static restore(props: ${1:Name}Props): ${1:Name} {",
      "    return new ${1:Name}(props);",
      "  }",
      "",
      "  update(payload: Update${1:Name}Props): Result<void, ValidationError> {",
      "    const newProps = {",
      "      ...this.props,",
      "      ...payload,",
      "    } satisfies ${1:Name}Props;",
      "    const result = ${1:Name}EntitySchema.safeParse(newProps);",
      "",
      "    if (!result.success) {",
      "      const issues = formatZodIssues(result.error.issues);",
      "      return err(new ValidationError('No se pudo actualizar ${1:Name}', issues));",
      "    }",
      "",
      "    this.props = result.data;",
      "    return ok(undefined);",
      "  }",
      "}"
    ]
  },
  "DDD Value Object": {
    "prefix": ["dddvo"],
    "description": "Crea un objeto de valor con validación Zod y Result",
    "body": [
      "import { ValueObject } from '${4:shared}/building-blocks/value-object.base';",
      "import { ValidationError } from '${4:#shared}/errors/errors';",
      "import { formatZodIssues } from '${4:#shared}/utils/zod-utils';",
      "import { err, ok, type Result } from 'neverthrow';",
      "",
      "interface ${1:Name}Props {",
      "  ${2:value: string;}",
      "}",
      "",
      "export class ${1:Name} extends ValueObject<${1:Name}Props> {",
      "  private constructor(props: ${1:Name}Props) {",
      "    super(props);",
      "  }",
      "",
      "  static create(${3:value: string}): Result<${1:Name}, ValidationError> {",
      "    if (!result.success) {",
      "      const issues = formatZodIssues(result.error.issues);",
      "      return err(new ValidationError('${5:Valor inválido}', issues));",
      "    }",
      "",
      "    return ok(new ${1:Name}({ ${6:value: result.data} }));",
      "  }",
      "}"
    ]
  },
  "Zod Schema": {
    "prefix": ["dddschema"],
    "description": "Crea un esquema de Zod para una entidad de dominio",
    "body": [
      "import z from 'zod';",
      "",
      "export const ${1:Name}EntitySchema = z.object({",
      "  ${2:props}",
      "  createdAt: z.date(),",
      "  updatedAt: z.date(),",
      "});",
      "",
      "export type ${1:Name}Props = z.infer<typeof ${1:Name}EntitySchema>;",
      "export type Create${1:Name}Props = Omit<${1:Name}Props, ${3:omit}>;",
      "export type Update${1:Name}Props = Partial<Omit<${1:Name}Props, ${3:omit}>>;"
    ]
  }
}
